{"title":"Docs","published":true,"menu":["main"],"components":[{"component":"PageBannerMedia","settings":{"id":"","class":"","style":"","title":"Docs","summary":null,"image":{"path":"/2018/10/19/5bca3a91a378dsmallbanner-1440x400.jpeg","title":"smallbanner-1440x400.jpeg","mime":"image/jpeg","description":"","tags":[],"size":18772,"image":true,"video":false,"audio":false,"archive":false,"document":false,"code":false,"created":1539979921,"modified":1539979921,"_by":"5bc9193c303535004c0002f5","width":1440,"height":220,"colors":["#0f324d","#b6becb","#5f6978","#7c8494","#747c8c"],"folder":"","_id":"5bca3a91646430004a00033b","styles":[{"style":"PageBannerMedia","path":"http://localhost:8088/storage/thumbs/315545b7b46f601fca32f93c98691ede_1440x440_90_1540228046_thumbnail_adb115059e28d960fa8badfac5516667.jpeg"}]},"height":"small"}},{"component":"SubPages","settings":{"id":"","class":"","style":"","title":null}}],"slug":"docs","description":"","title_slug":"docs","_mby":"5bc9193c303535004c0002f5","_by":"5bc9193c303535004c0002f5","_modified":1540160672,"_created":1540117063,"_id":"5bcc5247613366007a000373","_pid":null,"_o":2,"subpages":[{"title":"Requirements","components":[{"component":"heading","settings":{"id":"","class":"","style":"","text":"Requirements","tag":"h1"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>For running this example website you'll need:</p>\n<ul>\n<li>Docker (Tested on MacOs)</li>\n<li>node.js</li>\n<li>The code from&nbsp;<a href=\"https://github.com/pauloamgomes/CockpitCMS-React-Static\" target=\"_blank\" rel=\"noopener\">https://github.com/pauloamgomes/CockpitCMS-React-Static</a></li>\n</ul>\n<p>If you met above requirements proceed with the installation instructions.</p>"}}],"slug":"requirements","title_slug":"requirements","_mby":"5bc9193c303535004c0002f5","_by":"5bc9193c303535004c0002f5","_modified":1540156061,"_created":1540156061,"_id":"5bccea9d61336600920003cf","_link":"subpage"},{"title":"Installation","components":[{"component":"heading","settings":{"id":"","class":"","style":"","text":"Installation","tag":"h1"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>The installation of Cockpit React Static example website only requires a few steps:</p>"}},{"component":"CodeBlock","settings":{"id":"","class":"","style":"","code":"# Clone repository\ngit clone git@github.com:pauloamgomes/CockpitCMS-React-Static.git\ncd cockpitcms-react-static\n\n# start Cockpit\ncd cockpit\n./install.sh\n\n# start react app\ncd ../app\nyarn install\nyarn start","language":"bash"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>After the execution of above steps you are ready to access Cockpit on http://localhost:8088 (user: <strong>admin</strong> pass: <strong>admin</strong>) and the website on http://localhost:3000</p>"}},{"component":"Video","settings":{"id":"","class":"","style":"","url":"https://youtu.be/9s1HJMHe4zg","autoplay":null}}],"slug":"installation","title_slug":"installation","_mby":"5bc9193c303535004c0002f5","_by":"5bc9193c303535004c0002f5","_modified":1540163873,"_created":1540155904,"_id":"5bccea0061336600920003bd","_link":"subpage"},{"title":"Configuration","components":[{"component":"heading","settings":{"id":"","class":"","style":"","text":"Configuration","tag":"h1"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>Depending on your needs you can configure both the Cockpit CMS and React App, the main configuration options are defined below.</p>"}},{"component":"heading","settings":{"id":"","class":"","style":"","text":"Cockpit","tag":"h3"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>Cockpit has one single configuration file using the yaml format, it resides in config/config.yaml</p>"}},{"component":"CodeBlock","settings":{"id":"","class":"","style":"","code":"debug: true\n# Cockpit settings\napp.name: Cockpit Example\n# cockpit session name\nsession.name: cockpit_local\n# base url\nbase_url: http://localhost:8088\nsite_url: http://localhost:8088\nbase_route: /\n\n# define globally site language, otherwise will get from the user\ni18n: en\n\n# define the languages you want to manage\nlanguages:\n    en: English\n\n# unique slugs Addon\nunique.slugs:\n    slug.name: slug\n    collections:\n        page: title\n        post: title\n        subpage: title\n\n# disabled layout components\ncomponents.disabled:\n  image: true\n  section: true\n  html: true\n  button: true\n  gallery: true\n\n# define additional groups\ngroups:\n    # admin:\n    #   $admin: true\n    api:\n        $admin: false\n        cockpit:\n            backend: false\n            finder: false\n        BackupAndRestore:\n            manage.create: true\n    author:\n        $admin: false\n        $vars:\n            finder.path: /upload\n            finder.allowed_uploads: pdf, png, jpg\n            assets.allowed_uploads: png, jpg\n        BackupAndRestore:\n            manage.view: true\n            manage.download: true\n        cockpit:\n            backend: true\n            finder: true\n        imagestyles:\n            manage.view: true\n            manage.admin: false\n\n# use mongodb as main data storage\n#database:\n#    server: mongodb://localhost:27017\n#    options:\n#        db: cockpitdb\n\n# use smtp to send emails\n#mailer:\n#    from      : user@gmail.com\n#    transport : smtp\n#    host      : cockpit-react-mailhog\n#    user      : username\n#    password  : xxpasswordxx,\n#    port      : 1025,\n#    auth      : true,\n#    encryption: '' # '', 'ssl' or 'tls'\n\n# Set cors settings\ncors:\n  # Specify allowed headers, e.g. 'x-allowed-header'.\n  allowedHeaders: 'X-Requested-With, Content-Type, Origin, Cache-Control, Pragma, Authorization, Accept, Accept-Encoding'\n  # Specify allowed request methods, use ['*'] to allow all.\n  allowedMethods: 'PUT, POST, GET, OPTIONS, DELETE'\n  # Configure requests allowed from specific origins, use ['*'] to allow all.\n  allowedOrigins: '*'\n  # Sets the Access-Control-Max-Age header.\n  maxAge: 500\n  # Sets the Access-Control-Allow-Credentials header.\n  allowCredentials: true\n  # Sets the Access-Control-Expose-Headers header.\n  exposedHeaders: true\n","language":"yaml"}},{"component":"heading","settings":{"id":"","class":"","style":"","text":"React Static","tag":"h3"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>The React Static configurations are related with the Cockpit API endpoints and access tokens, the file src/cockpit/config.js contains the relevant exports:</p>"}},{"component":"CodeBlock","settings":{"id":"","class":"","style":"","code":"export const COCKPIT_HOST = \"http://localhost:8088\";\nexport const COCKPIT_UPLOADS_DIR = \"storage/uploads\";\nexport const COCKPIT_API_TOKEN = \"74371aad38cc6a00cdba9a1f7792c9\";\nexport const COCKPIT_FORMS_API_TOKEN = \"44112136dc6dd498a1ac39c097d8dc\";\n","language":"javascript"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>The access tokens shall be the same configured in Cockpit API page:</p>"}},{"component":"CustomImage","settings":{"id":"","class":"","style":"Image","title":"Cockpit API Settings pages","asset":{"path":"/2018/10/21/5bccfc7887536Cockpit-API-Settings.jpg","title":"Cockpit-API-Settings.jpg","mime":"image/jpeg","description":"","tags":[],"size":73670,"image":true,"video":false,"audio":false,"archive":false,"document":false,"code":false,"created":1540160632,"modified":1540160632,"_by":"5bc9193c303535004c0002f5","width":1280,"height":621,"colors":["#fbfbfb","#3a8986","#d4354f","#a0bbc5","#7c7c7c"],"folder":"5bcce0f16133660092000133","_id":"5bccfc786133660096000075","styles":[{"style":"Image","path":"http://localhost:8088/storage/thumbs/12975d4f687bb29383b9a0596d2bcc6f_1110x539_90_1540228046_fitToWidth_adb115059e28d960fa8badfac5516667.jpg"},{"style":"Square","path":"http://localhost:8088/storage/thumbs/6d3ee50ec0acecc26eb9490c12685230_550x550_90_1540228046_thumbnail_adb115059e28d960fa8badfac5516667.jpg"}]}}}],"slug":"configuration","title_slug":"configuration","_mby":"5bc9193c303535004c0002f5","_by":"5bc9193c303535004c0002f5","_modified":1540160751,"_created":1540160654,"_id":"5bccfc8e613366009e0002ec","_link":"subpage"},{"title":"Image Styles","components":[{"component":"heading","settings":{"id":"","class":"","style":"","text":"Image Styles","tag":"h1"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>Cockpit CMS provides the ability to transform any image/asset using the Image API (<a href=\"https://getcockpit.com/documentation/api/cockpit\" target=\"_blank\" rel=\"noopener\">https://getcockpit.com/documentation/api/cockpit</a>). However that doesn't provide the flexibility to configure the transformations directly in the CMS and can provide some overhead on the frontend implementation. To solve that the Image Styles addon is used (<a href=\"https://github.com/pauloamgomes/ImageStyles\" target=\"_blank\" rel=\"noopener\">https://github.com/pauloamgomes/ImageStyles</a>). The addon provides in the Cockpit admin interface a new section to create image styles and to apply automatically does styles into asset/image fields, so when fetching a collection the styled image url is part of the resulting payload:<br /><br /></p>"}},{"component":"CustomImage","settings":{"id":"","class":"","style":"Image","title":"Image Styles Payload","asset":{"path":"/2018/10/21/5bccee075954bExample-StylesPayload.jpg","title":"Example-StylesPayload.jpg","mime":"image/jpeg","description":"","tags":[],"size":178004,"image":true,"video":false,"audio":false,"archive":false,"document":false,"code":false,"created":1540156935,"modified":1540156935,"_by":"5bc9193c303535004c0002f5","width":1280,"height":634,"colors":["#dadfdc","#3a5468","#7f9885","#669760","#646464"],"folder":"5bcce0f16133660092000133","_id":"5bccee07613366009600029e","styles":[{"style":"Image","path":"http://localhost:8088/storage/thumbs/1279a18413fa846d37a595c95af56fe7_1110x550_90_1540228046_fitToWidth_adb115059e28d960fa8badfac5516667.jpg"},{"style":"Square","path":"http://localhost:8088/storage/thumbs/9d91242ce6a21989d32032205ca397c6_550x550_90_1540228046_thumbnail_adb115059e28d960fa8badfac5516667.jpg"}]}}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p><br />The following image styles are already configured:<br /><br /></p>"}},{"component":"CustomImage","settings":{"id":"","class":"","style":"Image","title":"Configured image styles","asset":{"path":"/2018/10/21/5bccee79092c5Example-ImageStylesConfiguration.jpg","title":"Example-ImageStylesConfiguration.jpg","mime":"image/jpeg","description":"","tags":[],"size":83966,"image":true,"video":false,"audio":false,"archive":false,"document":false,"code":false,"created":1540157049,"modified":1540157049,"_by":"5bc9193c303535004c0002f5","width":1280,"height":693,"colors":["#e4e4e5","#3e3e3e","#52c3e5","#909090","#747474"],"folder":"5bcce0f16133660092000133","_id":"5bccee7961336600960003a2","styles":[{"style":"Image","path":"http://localhost:8088/storage/thumbs/3f927346eed5eb7951944da8b475d97e_1110x601_90_1540228046_fitToWidth_adb115059e28d960fa8badfac5516667.jpg"},{"style":"Square","path":"http://localhost:8088/storage/thumbs/d2d8bb81891e96258d41eb4808ded9d1_550x550_90_1540228046_thumbnail_adb115059e28d960fa8badfac5516667.jpg"}]}}}],"slug":"image-styles","title_slug":"image-styles","_mby":"5bc9193c303535004c0002f5","_by":"5bc9193c303535004c0002f5","_modified":1540157183,"_created":1540157055,"_id":"5bccee7f613366008e000330","_link":"subpage"},{"title":"Blogs","components":[{"component":"heading","settings":{"id":"","class":"","style":"","text":"Blogs","tag":"h1"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>Blogs are supported using a custom Cockpit collection (Blog Post), the collection have a reference to the terms collection (used as taxonomy) and makes use of the same reusable components we have available for the Page and SubPage collections.<br /><br /></p>"}},{"component":"CustomImage","settings":{"id":"","class":"","style":"Image","title":"Blog Collection definition","asset":{"path":"/2018/10/21/5bccf5ab1e963BlogCollection.jpg","title":"BlogCollection.jpg","mime":"image/jpeg","description":"","tags":[],"size":95459,"image":true,"video":false,"audio":false,"archive":false,"document":false,"code":false,"created":1540158891,"modified":1540158891,"_by":"5bc9193c303535004c0002f5","width":1280,"height":706,"colors":["#fafafa","#3c6d77","#9aa6a4","#e23c29","#b89870"],"folder":"5bcce0f16133660092000133","_id":"5bccf5ab61336600960002c2","styles":[{"style":"Image","path":"http://localhost:8088/storage/thumbs/394cce5cde34a1cefa8bea69de09bb99_1110x613_90_1540228046_fitToWidth_adb115059e28d960fa8badfac5516667.jpg"},{"style":"Square","path":"http://localhost:8088/storage/thumbs/e76a86e4bc1ed30147bd1dc49a8f5609_550x550_90_1540228046_thumbnail_adb115059e28d960fa8badfac5516667.jpg"}]}}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p><br />To make them visible on the website its just required to have a Page with the Blog Posts component:<br /><br /></p>"}},{"component":"CustomImage","settings":{"id":"","class":"","style":"Image","title":"Blog Page","asset":{"path":"/2018/10/21/5bccf710ab90aBlogPage.jpg","title":"BlogPage.jpg","mime":"image/jpeg","description":"","tags":[],"size":73180,"image":true,"video":false,"audio":false,"archive":false,"document":false,"code":false,"created":1540159248,"modified":1540159248,"_by":"5bc9193c303535004c0002f5","width":1280,"height":727,"colors":["#cacbcb","#325253","#808c90","#646464","#6c6c6c"],"folder":"5bcce0f16133660092000133","_id":"5bccf710613366009a00032e","styles":[{"style":"Image","path":"http://localhost:8088/storage/thumbs/8b036b6fb3bb54d579d9533dff227e6b_1110x631_90_1540228046_fitToWidth_adb115059e28d960fa8badfac5516667.jpg"},{"style":"Square","path":"http://localhost:8088/storage/thumbs/4998fb7f2dc76d3aa729fd07499be2f3_550x550_90_1540228046_thumbnail_adb115059e28d960fa8badfac5516667.jpg"}]}}}],"slug":"blogs","title_slug":"blogs","_mby":"5bc9193c303535004c0002f5","_by":"5bc9193c303535004c0002f5","_modified":1540159258,"_created":1540158905,"_id":"5bccf5b9613366009600021a","_link":"subpage"},{"title":"Live Preview","components":[{"component":"heading","settings":{"id":"","class":"","style":"","text":"Live Preview","tag":"h1"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>The Live Preview is a custom feature that makes usage of the ability of cockpit to specify a preview endpoint (for the frontend), on the React Static side of things, we have a Preview component, that handles a Post Message event (triggered by Cockpit to the preview iFrame) and re-renders the page with all the changes. The speed of changes is quite good giving the idea of a real time preview, something probably not available on any other CMS.<br /><br /></p>"}},{"component":"Video","settings":{"id":"","class":"","style":"","url":"https://youtu.be/2Sx6jr4S8_Q","autoplay":true}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>The implementation on React is simple, first we have a specific route for previewing:</p>"}},{"component":"CodeBlock","settings":{"id":"","class":"","style":"","code":"getRoutes: async () => {\n    // Other routes are processed.\n\n    // Handle preview route.\n    routes.push({\n      path: \"/preview\",\n      component: \"src/pages/Preview\",\n    });\n}","language":"javascript"}},{"component":"text","settings":{"id":"","class":"","style":"","text":"<p>And the Preview component can be resumed to the below code:</p>"}},{"component":"CodeBlock","settings":{"id":"","class":"","style":"","code":"import React, { Component } from \"react\";\n\nimport Metatags from \"../components/Metatags\";\nimport CockpitComponents from \"../components/CockpitComponents\";\n\nexport default class Preview extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: \"\",\n      description: \"\",\n      components: [],\n    };\n  }\n\n  componentDidMount = () => {\n    window.addEventListener(\"message\", this.handlePreviewEntry);\n  };\n  componentWillUnmount = () => {\n    window.removeEventListener(\"message\", this.handlePreviewEntry);\n  };\n\n  handlePreviewEntry = event => {\n    this.setState({\n      title: event.data.entry.title,\n      description: event.data.entry.description,\n      components: event.data.entry.components,\n    });\n  };\n\n  render() {\n    const { title, description, components } = this.state;\n    return (\n      <article>\n        <Metatags title={title} pageDescription={description} />\n        <CockpitComponents components={components} />\n      </article>\n    );\n  }\n}\n","language":"javascript"}}],"slug":"live-preview","title_slug":"live-preview","_mby":"5bc9193c303535004c0002f5","_by":"5bc9193c303535004c0002f5","_modified":1540160158,"_created":1540159404,"_id":"5bccf7ac613366009e0002c3","_link":"subpage"}]}